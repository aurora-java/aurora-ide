(function(){var a=$A.Charts,r=a.Chart,o=a.addEvent,n=a.createElement,p=a.discardElement,l=a.css,f=a.merge,c=a.each,s=a.extend,b=Math,k=b.max,w=document,e=window,t="ontouchstart" in w.documentElement,h="M",i="L",m="div",q="hidden",j="none",d="highcharts-",v="absolute",g="px",u=a.setOptions({lang:{downloadPNG:"导出成 PNG 格式",downloadJPEG:"导出成 JPEG 格式",downloadPDF:"导出成 PDF 格式",downloadSVG:"导出成 SVG 格式",exportButtonTitle:"导出图表",printButtonTitle:"打印图表"}});u.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF"},menuItemStyle:{padding:"0 5px",background:j,color:"#303030",fontSize:t?"14px":"12px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{align:"right",backgroundColor:{linearGradient:[0,0,0,20],stops:[[0.4,"#F7F7F7"],[0.6,"#E3E3E3"]]},borderColor:"#B0B0B0",borderRadius:3,borderWidth:1,height:20,hoverBorderColor:"#909090",hoverSymbolFill:"#81A7CF",hoverSymbolStroke:"#4572A5",symbolFill:"#E0E0E0",symbolStroke:"#A0A0A0",symbolX:11.5,symbolY:10.5,verticalAlign:"top",width:24,y:10}};u.exporting={type:"image/png",url:"/exportchart",width:800,buttons:{exportButton:{symbol:"exportIcon",x:-10,symbolFill:"#A8BF77",hoverSymbolFill:"#768F3E",_titleKey:"exportButtonTitle",menuItems:[{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]},printButton:{symbol:"printIcon",x:-36,symbolFill:"#B5C9DF",hoverSymbolFill:"#779ABF",_titleKey:"printButtonTitle",onclick:function(){this.print()}}}};s(r.prototype,{getSVG:function(D){var E=this,x,F,B,y,z,A,C,G=f(E.options,D);if(!w.createElementNS){w.createElementNS=function(I,H){var J=w.createElement(H);J.getBBox=function(){return E.renderer.Element.prototype.getBBox.apply({element:J})};return J}}F=n(m,null,{position:v,top:"-9999em",width:E.chartWidth+g,height:E.chartHeight+g},w.body);s(G.chart,{renderTo:F,forExport:true});G.exporting.enabled=false;G.chart.plotBackgroundImage=null;G.series=[];c(E.series,function(H){y=H.options;y.animation=false;y.showCheckbox=false;if(y&&y.marker&&/^url\(/.test(y.marker.symbol)){y.marker.symbol="circle"}y.data=[];c(H.data,function(I){z=I.config;A={x:I.x,y:I.y,name:I.name};if(typeof z=="object"&&I.config&&z.constructor!=Array){s(A,z)}y.data.push(A);C=I.config&&I.config.marker;if(C&&/^url\(/.test(C.symbol)){delete C.symbol}});G.series.push(y)});x=new $A.Charts.Chart(G);B=x.container.innerHTML;G=null;x.destroy();p(F);B=B.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/isTracker="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(H){return H.toLowerCase()});B=B.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'");if(B.match(/ xmlns="/g).length==2){B=B.replace(/xmlns="[^"]+"/,"")}return B},exportChart:function(y,B){var A,z=this,x=z.getSVG(B);y=f(z.options.exporting,y);A=n("form",{method:"post",action:y.url},{display:j},w.body);c(["filename","type","width","svg"],function(C){n("input",{type:q,name:C,value:{filename:y.filename||"chart",type:y.type,width:y.width,svg:x}[C]},null,A)});A.submit();p(A)},print:function(){var A=this,y=A.container,B=[],z=y.parentNode,x=w.body,C=x.childNodes;if(A.isPrinting){return}A.isPrinting=true;c(C,function(E,D){if(E.nodeType==1){B[D]=E.style.display;E.style.display=j}});x.appendChild(y);e.print();setTimeout(function(){z.appendChild(y);c(C,function(E,D){if(E.nodeType==1){E.style.display=B[D]}});A.isPrinting=false},1000)},contextMenu:function(Q,J,F,E,K,I){var H=this,O=H.options.navigation,B=O.menuItemStyle,M=H.chartWidth,D=H.chartHeight,P="cache-"+Q,A=H[P],L=k(K,I),z="3px 3px 10px #888",N,G,C;if(!A){H[P]=A=n(m,{className:d+Q},{position:v,zIndex:1000,padding:L+g},H.container);N=n(m,null,s({MozBoxShadow:z,WebkitBoxShadow:z,boxShadow:z},O.menuStyle),A);G=function(){l(A,{display:j})};o(A,"mouseleave",G);c(J,function(x){if(x){var y=n(m,{onmouseover:function(){l(this,O.menuItemHoverStyle)},onmouseout:function(){l(this,B)},innerHTML:x.text||a.getOptions().lang[x.textKey]},s({cursor:"pointer"},B),N);y[t?"ontouchstart":"onclick"]=function(){G();x.onclick.apply(H,arguments)}}});H.exportMenuWidth=A.offsetWidth;H.exportMenuHeight=A.offsetHeight}C={display:"block"};if(F+H.exportMenuWidth>M){C.right=(M-F-K-L)+g}else{C.left=(F-L)+g}if(E+I+H.exportMenuHeight>D){C.bottom=(D-E-L)+g}else{C.top=(E+I-L)+g}l(A,C)},addButton:function(L){var F=this,E=F.renderer,z=f(F.options.navigation.buttonOptions,L),K=z.onclick,y=z.menuItems,G=z.width,H=z.height,C,A,B,x=z.borderWidth,I={stroke:z.borderColor},J={stroke:z.symbolStroke,fill:z.symbolFill};if(z.enabled===false){return}function D(){A.attr(J);C.attr(I)}C=E.rect(0,0,G,H,z.borderRadius,x).align(z,true).attr(s({fill:z.backgroundColor,"stroke-width":x,zIndex:19},I)).add();B=E.rect(0,0,G,H,0).align(z).attr({fill:"rgba(255, 255, 255, 0.001)",title:a.getOptions().lang[z._titleKey],zIndex:21}).css({cursor:"pointer"}).on("mouseover",function(){A.attr({stroke:z.hoverSymbolStroke,fill:z.hoverSymbolFill});C.attr({stroke:z.hoverBorderColor})}).on("mouseout",D).on("click",D).add();if(y){K=function(N){D();var M=B.getBBox();F.contextMenu("export-menu",y,M.x,M.y,G,H)}}B.on("click",function(){K.apply(F,arguments)});A=E.symbol(z.symbol,z.symbolX,z.symbolY,(z.symbolSize||12)/2).align(z,true).attr(s(J,{"stroke-width":z.symbolStrokeWidth||1,zIndex:20})).add()}});a.Renderer.prototype.symbols.exportIcon=function(A,B,z){return[h,A-z,B+z,i,A+z,B+z,A+z,B+z*0.5,A-z,B+z*0.5,"Z",h,A,B+z*0.5,i,A-z*0.5,B-z/3,A-z/6,B-z/3,A-z/6,B-z,A+z/6,B-z,A+z/6,B-z/3,A+z*0.5,B-z/3,"Z"]};a.Renderer.prototype.symbols.printIcon=function(A,B,z){return[h,A-z,B+z*0.5,i,A+z,B+z*0.5,A+z,B-z/3,A-z,B-z/3,"Z",h,A-z*0.5,B-z/3,i,A-z*0.5,B-z,A+z*0.5,B-z,A+z*0.5,B-z/3,"Z",h,A-z*0.5,B+z*0.5,i,A-z*0.75,B+z,A+z*0.75,B+z,A+z*0.5,B+z*0.5,"Z"]};r.prototype.callbacks.push(function(x){var A,z=x.options.exporting,y=z.buttons;if(z.enabled!==false){for(A in y){x.addButton(y[A])}}})})();